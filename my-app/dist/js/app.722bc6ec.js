(function(e){function t(t){for(var r,n,o=t[0],l=t[1],c=t[2],m=0,d=[];m<o.length;m++)n=o[m],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(s.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},i={app:0},s=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"08cc":function(e,t,a){"use strict";var r=a("ba96"),i=a.n(r);i.a},"3d9f":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),a("body",[a("router-view")],1),a("Footer")],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("div",[a("b-navbar",{staticClass:"shadow mb-5",attrs:{toggleable:"xl",type:"dark"}},[a("b-navbar-brand",{attrs:{href:"/"}},[e._v("HOTEL DE BRIERE")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item-dropdown",{attrs:{text:"L'association",right:""}},[a("b-dropdown-item",{attrs:{href:"#"}},[e._v("Présentation")]),a("b-dropdown-item",{attrs:{href:"#"}},[e._v("Son histoire")]),a("b-dropdown-item",{attrs:{href:"#"}},[e._v("Nous joindre")]),a("b-dropdown-item",{attrs:{href:"#"}},[e._v("Partenaires")])],1),a("b-nav-item-dropdown",{attrs:{text:"Le projet",right:""}},[a("b-dropdown-item",{attrs:{href:"#"}},[e._v("L'emergence")]),a("b-dropdown-item",{attrs:{href:"#"}},[e._v("La convention")])],1),a("b-nav-item",{attrs:{href:"#"}},[e._v("La phase d'amorçage")]),a("b-nav-item",{attrs:{href:"#"}},[e._v("Le chantier")]),a("b-nav-item",{attrs:{href:"#"}},[e._v("Evenements")]),a("b-nav-item",{attrs:{href:"articles"}},[e._v("On en parle")]),a("b-nav-item",{attrs:{href:"#"}},[e._v("Ressources")]),a("b-nav-item",{attrs:{href:"admin"}},[e._v("Administration")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("em",[e._v("Espace Perso")])]},proxy:!0}])},[e.isConnected?a("b-dropdown-item",{attrs:{href:"profil"}},[e._v("Profil")]):e._e(),e.isConnected?e._e():a("b-dropdown-item",{attrs:{href:"inscriptionConnexion"}},[e._v("Se connecter")]),a("b-dropdown-item",{attrs:{href:"/"},on:{click:e.signOutUser}},[e._v("Déconnexion")])],1)],1)],1)],1)],1)])},o=[],l=a("8aa5"),c=a.n(l),u={data:function(){return{isConnected:!1,user:""}},created:function(){if(this.user=c.a.auth().currentUser,console.log(this.user),null!=this.user)return this.isConnected=!0},methods:{signOutUser:function(){c.a.auth().signOut().then((function(){alert("Vous êtes déconnecté. A bientôt")})).catch((function(e){console.log(e.message),alert("Une erreur s'est produite. Vous n'êtes pas déconnecté.")}))}}},m=u,d=(a("8baf"),a("2877")),f=Object(d["a"])(m,n,o,!1,null,null,null),p=f.exports,b=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"px-5 mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4 text-light text-center"},[a("p",[e._v("Copyright")])]),a("div",{staticClass:"col-md-4"})])])}],h={},g=h,_=(a("760c"),Object(d["a"])(g,b,v,!1,null,null,null)),y=_.exports,C={components:{Header:p,Footer:y}},x=C,w=(a("5c0b"),Object(d["a"])(x,i,s,!1,null,null,null)),S=w.exports,k=(a("45fc"),a("8c4f")),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-5"},[a("b-container",[a("b-row",[a("b-col",{staticClass:"mb-5 mx-auto",attrs:{lg:"3",md:"12",sm:"12"}},[a("homePresentation")],1),a("b-col",{staticClass:"my-5 mx-auto",attrs:{lg:"5",md:"12",sm:"12"}},e._l(e.articlesList,(function(t){return a("Article",{key:t.id,attrs:{article:t,articlesList:e.articlesList}})})),1),a("b-col",{staticClass:"mb-5 mx-auto",attrs:{lg:"3",md:"12",sm:"12"}},[a("homeProvisoire"),a("homeProvisoire"),a("homeProvisoire"),a("homeProvisoire")],1)],1)],1)],1)},A=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-card",{staticStyle:{"max-width":"100rem"},attrs:{"no-body":"","img-src":"https://static.actu.fr/uploads/2019/10/hotel-magny-854x641.jpg","img-alt":"Image","img-top":""},scopedSlots:e._u([{key:"header",fn:function(){return[a("h4",{staticClass:"mb-0"},[e._v("Présentation")])]},proxy:!0}])},[a("b-card-body",[a("b-card-text",[e._v(" C’est un lieu chargé d’histoire qui est sur le point de connaître une nouvelle vie. Mercredi 25 septembre, les esquisses du projet de réhabilitation de l’hôtel de Brière, implanté place de la Halle, à Magny-en-Vexin (Val-d’Oise), ont été présentées devant plus de soixante personnes réunies à la salle des fêtes. Le dossier sera piloté par les associations Magny-en-Vexin: une histoire qui se cultive et Terre et Vie, en concertation avec la municipalité. L’objectif est, à terme, d’y créer un centre d’information et de formation favorisant la transmission d’expertises dans le domaine de la restauration. ")])],1)],1)],1)},T=[],U={},P=U,L=Object(d["a"])(P,D,T,!1,null,"baaf7994",null),O=L.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col justify-content-center my-3"},[a("b-card",{staticClass:"container-fluid"},[a("img",{staticClass:"col-12",attrs:{src:e.article.picture}}),a("h1",[e._v(e._s(e.article.title))]),a("b-card-text",[e._v(" "+e._s(e.article.abstract)+" ")]),a("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"completeArticle",params:{id:e.article.id,list:e.articlesList}}}},[e._v("Lire la suite")])],1)],1)},j=[],R={props:{article:Object,articlesList:Array},data:function(){return{showContact:!1,imageUrl:""}},methods:{send:function(){this.showContact=!0}}},V=R,I=Object(d["a"])(V,$,j,!1,null,"18869f3f",null),z=I.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card-group",{attrs:{deck:""}},[a("b-card",{staticClass:"mb-3 imageDeFond",attrs:{title:"Trucs et Astuces"}},[a("b-card-text",[e._v("Rubriques pouvant intéresser")]),a("b-button",{staticClass:"btn-ouvrir",attrs:{href:"#"}},[e._v("Ouvrir")])],1)],1)],1)},q=[],N={},F=N,B=(a("653a"),Object(d["a"])(F,M,q,!1,null,"3e1237fe",null)),G=B.exports,H={components:{homePresentation:O,Article:z,homeProvisoire:G}},J=H,W=Object(d["a"])(J,E,A,!1,null,"67d907ae",null),K=W.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[e.inscrit?a("div",[a("Connexion"),a("p",{on:{click:function(t){return e.changeDisplay()}}},[e._v("Pas encore inscrit?")])],1):a("div",[a("Inscription"),a("div",{on:{click:function(t){return e.changeDisplay()}}},[e._v("Déjà inscrit?")])],1)])},Q=[],Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card-group",{attrs:{deck:""}},[a("b-card",{staticClass:"mb-3",attrs:{title:"Formulaire de connexion"}},[a("b-card-text",[e.error?a("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):e._e(),a("label",{staticClass:"col-4",attrs:{for:"email"}},[e._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control  col-8 ",attrs:{type:"email",id:"email",name:"email",required:"",placeholder:"Votre adresse mail"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),a("label",{staticClass:"mt-3 col-4",attrs:{for:"password"}},[e._v("Mot de passe:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control  col-8 ",attrs:{type:"password",id:"password",name:"password",required:"",placeholder:"Choisissez votre mot de passe"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),a("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"},on:{click:e.connexion}},[e._v("Se connecter")])],1)],1)],1)],1)},Z=[],ee={name:"connexion",data:function(){return{form:{email:"",password:""},error:null}},methods:{connexion:function(){var e=this;c.a.auth().signInWithEmailAndPassword(this.form.email,this.form.password).then((function(){alert("Vous êtes connecté."),e.$router.push({name:"profile"})})).catch((function(e){alert("Une erreur s'est produite"),this.data.error=e.message}))}}},te=ee,ae=Object(d["a"])(te,Y,Z,!1,null,"4fdc0d75",null),re=ae.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card-group",{attrs:{deck:""}},[a("b-card",{staticClass:"mb-3",attrs:{title:"Formulaire d'inscription"}},[a("b-card-text",[e.error?a("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):e._e(),a("label",{staticClass:"col-4",attrs:{for:"email"}},[e._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control  col-8 ",attrs:{type:"email",id:"email",name:"email",required:"",placeholder:"Votre adresse mail"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),a("label",{staticClass:"mt-3 col-4",attrs:{for:"password"}},[e._v("Mot de passe:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control  col-8 ",attrs:{type:"password",id:"password",name:"password",required:"",placeholder:"Choisissez votre mot de passe"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),a("label",{staticClass:"mt-3 col-4",attrs:{for:"confirmPassword"}},[e._v("Mot de passe:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.confirmPassword,expression:"form.confirmPassword"}],staticClass:"form-control  col-8 ",attrs:{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirmez votre mot de passe"},domProps:{value:e.form.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.form,"confirmPassword",t.target.value)}}}),a("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"},on:{click:e.inscription}},[e._v("S'inscrire")])],1)],1)],1)],1)},se=[],ne=(a("ac1f"),a("5319"),{name:"inscription",data:function(){return{form:{email:"",password:"",confirmPassword:""},error:null}},methods:{inscription:function(){var e=this;1==this.verifPw()?c.a.auth().createUserWithEmailAndPassword(this.form.email,this.form.password).then((function(){alert("Vous êtes maintenant inscrit."),e.$router.replace({name:"profile"})})).catch((function(e){alert("Une erreur s'est produite."),this.data.error=e.message})):alert("Les mots de passe sont différents.")},verifPw:function(){return this.form.password===this.form.confirmPassword}}}),oe=ne,le=Object(d["a"])(oe,ie,se,!1,null,"298ed5e5",null),ce=le.exports,ue={components:{Connexion:re,Inscription:ce},data:function(){return{inscrit:!0}},methods:{changeDisplay:function(){console.log(this.inscrit),this.inscrit=!this.inscrit}}},me=ue,de=Object(d["a"])(me,X,Q,!1,null,null,null),fe=de.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Oops!")]),a("h3",[e._v("La page que vous essayez de charger n'existe pas.")]),a("router-link",{attrs:{to:e.home}},[e._v("Retour à la page d'accueil page")])],1)},be=[],ve={},he=ve,ge=Object(d["a"])(he,pe,be,!1,null,null,null),_e=ge.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("NewArticle")],1)},Ce=[],xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",[a("h1",[e._v("Création de l'article:")]),e.isConnected&&e.isAdmin?a("div",[e.show?a("b-form",{on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},submit:e.onSubmit,reset:e.onReset}},[a("b-form-group",{attrs:{label:"Titre:"}},[a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Titre"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:"Sous-titre:",description:"Facultatif"}},[a("b-form-input",{attrs:{placeholder:"Sous-titre"},model:{value:e.form.subtitle,callback:function(t){e.$set(e.form,"subtitle",t)},expression:"form.subtitle"}})],1),a("b-form-group",{attrs:{label:"Résumé:"}},[a("b-form-textarea",{attrs:{placeholder:"Résumé",rows:"3","max-rows":"6"},model:{value:e.form.abstract,callback:function(t){e.$set(e.form,"abstract",t)},expression:"form.abstract"}})],1),a("b-form-group",{attrs:{label:"Contenu de l'article:"}},[a("b-form",[a("vue-editor",{staticStyle:{"background-color":"white"},attrs:{label:"Contenu de l'article:",required:""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),a("b-form-group",{attrs:{label:"Date de mise en ligne:"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{required:""},model:{value:e.form.releaseDate,callback:function(t){e.$set(e.form,"releaseDate",t)},expression:"form.releaseDate"}})],1),a("b-form-group",{attrs:{label:"Catégorie:"}},[a("b-form-input",{attrs:{placeholder:"Ajouter une catégorie en appuyant sur Entrée",list:"input-list"},on:{keyup:e.handleTyping},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}}),a("b-form-datalist",{attrs:{id:"input-list",options:e.propTags}}),a("div",{staticClass:"tags mt-2"},e._l(e.form.tags,(function(t,r){return a("div",{key:r,staticClass:"tag",on:{click:function(t){return e.removeTag(r)}}},[e._v(e._s(t))])})),0)],1),a("b-form-group",{attrs:{label:"Auteur de l'article:"}},[a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Auteur"},model:{value:e.form.autor,callback:function(t){e.$set(e.form,"autor",t)},expression:"form.autor"}})],1),a("b-form-group",{attrs:{label:"Photo de présentation:"}},[a("b-form",{model:{value:e.picture,callback:function(t){e.picture=t},expression:"picture"}},[a("div",[a("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}})]),a("div",[a("p",[e._v(" Progression: "+e._s(e.uploadValue.toFixed()+"%")+" "),a("progress",{attrs:{id:"progress",max:"100"},domProps:{value:e.uploadValue}})])]),null!=e.imageData?a("div",[a("img",{staticClass:"preview",attrs:{required:"",src:e.form.picture}}),a("br"),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.onUpload(t)}}},[e._v("Importer l'image")])],1):e._e()])],1),a("b-form-group",{attrs:{label:"Média de présentation:",description:"facultatif"}},[a("b-form-input",{attrs:{type:"text",placeholder:"Lien vers un média"},model:{value:e.form.media,callback:function(t){e.$set(e.form,"media",t)},expression:"form.media"}}),a("b-checkbox",{model:{value:e.form.is3DReal,callback:function(t){e.$set(e.form,"is3DReal",t)},expression:"form.is3DReal"}},[e._v("Cocher si c'est une réalisation 3D SketchFab")])],1),a("div",{staticClass:"mt-5"},[a("h1",[e._v("Prévisualisation de l'article:")]),a("div",[a("h2",[e._v("Vignette:")]),a("b-card",{staticClass:"mb-4",staticStyle:{"max-width":"50rem"},attrs:{title:e.form.title,"img-src":e.form.picture,"img-alt":"Image","img-top":"","img-width":"max-whidth: 50rem","img-height":"max-height: 50rem",tag:"article"}},[a("b-card-text",[e._v(e._s(e.form.abstract))]),a("b-button",{attrs:{href:"#",variant:"primary"}},[e._v("Lire la suite")])],1)],1),a("div",[a("h2",[e._v("Page Complète:")]),a("b-card",[e.form.media&&0==e.form.is3DReal?a("div",{staticClass:"mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{src:e.form.media,frameborder:"0"}})]):e._e(),e.form.media&&e.form.is3DReal?a("div",[a("div",{staticClass:"sketchfab-embed-wrapper mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{title:"A 3D model",src:e.form.media,frameborder:"0",allow:"autoplay; fullscreen; vr",mozallowfullscreen:"true",webkitallowfullscreen:"true"}})])]):a("div",[a("img",{staticClass:"col-12",attrs:{src:e.form.picture}})]),a("div",[a("h1",[e._v(e._s(e.form.title))]),a("h3",[e._v(e._s(e.form.subtitle))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v("Mis en ligne le: "+e._s(e.form.releaseDate))]),a("div",{staticClass:"col"},[e._v("Ecrit part: "+e._s(e.form.autor))]),a("div",{staticClass:"col"},[e._v(" Catégories: "),e._l(e.form.tags,(function(t,r){return a("div",{key:r,staticClass:"raw"},[e._v(e._s(t))])}))],2)]),a("div",{domProps:{innerHTML:e._s(e.form.content)}})])])],1)]),a("b-button",{staticClass:"mx-3 my-3",attrs:{type:"submit",variant:"primary"}},[e._v("Enregistrer")]),a("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Recommencer l'article")])],1):e._e()],1):e.isConnected&&!e.isAdmin?a("b-card",{staticClass:"mb-4",attrs:{title:"Portail administrateur"}},[a("p",[e._v("Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")])],1):a("b-card",{staticClass:"mb-4",attrs:{title:"Portail administrateur"}},[a("p",[e._v("Accès refusé! Vous devez vous connecter.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")]),a("b-button",{attrs:{variant:"primary",href:"inscriptionConnexion"}},[e._v("Se connecter")])],1)],1)])},we=[],Se=(a("4160"),a("c975"),a("a434"),a("b0c0"),a("b64b"),a("159b"),a("5873")),ke={components:{VueEditor:Se["a"]},data:function(){return{isConnected:!1,isAdmin:!1,user:"",currentU:{firstname:"",name:"",admin:!1},imageData:null,picture:null,uploadValue:0,form:{title:"",subtitle:"",abstract:"",content:"",releaseDate:"",autor:"",tags:[],picture:"",media:"",is3DReal:!1},tag:"",propTags:[],show:!0}},created:function(){this.user=c.a.auth().currentUser,null!=this.user&&(this.isConnected=!0),this.display(this.propTags)},methods:{display:function(e){var t=c.a.database().ref("tags");t.once("value",(function(t){t.forEach((function(t){var a=t.key;console.log(a),e.push(a)}))})),console.log(e.length)},onSubmit:function(e){if(e.preventDefault(),0==this.form.abstract.length||this.form.abstract.length>280)alert("Vous devez écrire un résumé de 280 caractères maximum.");else if(0==this.form.content.length)alert("Vous devez écrire un article.");else if(0==this.form.releaseDate.length)alert("Vous devez entrer une date.");else if(0==this.form.picture.length)alert("Vous devez entrer une image.");else if(0==this.form.tags.length)alert("Vous devez entrer au moins une catégorie.");else{for(var t=0;t<this.form.tags.length;t++)c.a.database().ref("tags/"+this.form.tags[t]).set({tag:this.form.tags[t]});console.log(this.form.content.length),c.a.database().ref("articles/").push({title:this.form.title,subtitle:this.form.subtitle,abstract:this.form.abstract,content:this.form.content,releaseDate:this.form.releaseDate,autor:this.form.autor,tags:this.form.tags,picture:this.form.picture,media:this.form.media,is3DReal:this.form.is3DReal}).then(alert("Votre article a été créé avec succès."))}},onReset:function(e){var t=this;e.preventDefault(),this.form.title="",this.form.subtitle="",this.form.abstract="",this.form.content="",this.form.releaseDate="",this.form.autor="",this.form.tags=[],this.form.picture="",this.form.media="",this.form.is3DReal=!1,this.show=!1,this.$nextTick((function(){t.show=!0}))},previewImage:function(e){this.uploadValue=0,this.picture=null,this.imageData=e.target.files[0]},onUpload:function(){var e=this;this.picture=null;var t=c.a.storage().ref("".concat(this.imageData.name)).put(this.imageData);t.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(e){console.log(e.message)}),(function(){e.uploadValue=100,t.snapshot.ref.getDownloadURL().then((function(t){e.form.picture=t}))}))},addTag:function(e){if(""!=e&&this.form.tags.length<3){var t=e.toLowerCase();this.form.tags.push(t)}},removeTag:function(e){this.form.tags.splice(e,1)},tagExists:function(e){return-1!==this.form.tags.indexOf(e)},handleTyping:function(e){if(13===e.keyCode){var t=this.tag.replace(/,/g,"");this.tagExists(t)||(this.addTag(t),this.tag="")}},createArticle:function(){}},mounted:function(){var e=this;e.user=c.a.auth().currentUser;var t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.user.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.currentU.firstname=r[0].firstname,e.currentU.name=r[0].name,e.currentU.admin=r[0].admin,e.isAdmin=e.currentU.admin)}))}},Ee=ke,Ae=(a("a6c9"),Object(d["a"])(Ee,xe,we,!1,null,"5804199c",null)),De=Ae.exports,Te={components:{NewArticle:De}},Ue=Te,Pe=Object(d["a"])(Ue,ye,Ce,!1,null,"4a2ebbb2",null),Le=Pe.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("Profile")],1)},$e=[],je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{staticClass:"mb-4 center-block",staticStyle:{"max-width":"45rem","min-width":"45rem",float:"none"},attrs:{title:"Mon profil"}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.createUser(t)}}},[a("b-form-group",{attrs:{label:"Prénom:","label-for":"inputFirstname"}},[a("b-form-input",{attrs:{id:"inputFirstName",type:"text",required:"",placeholder:"Prénom"},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}},[e._v(e._s(e.userslct.firstname))])],1),a("b-form-group",{attrs:{label:"Nom","label-for":"inputName"}},[a("b-form-input",{attrs:{id:"inputName",type:"text",required:"",placeholder:"Nom"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[e._v(e._s(e.userslct.name))])],1),a("b-form-group",{attrs:{label:"Email","label-for":"inputEmail"}},[a("b-form-input",{attrs:{id:"inputEmail",type:"email",disabled:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[e._v(e._s(e.user.email))])],1),a("div",{staticClass:"row"},[a("b-button",{staticClass:"mx-3 col-2",attrs:{type:"submit",variant:"primary"}},[e._v("Valider")]),a("div",{staticClass:"col-5"}),e.isAdmin?a("b-button",{staticClass:"mx-2 col-4",attrs:{right:"",variant:"danger",href:"admin"}},[e._v("Espace Administrateur")]):e._e()],1)],1)],1)},Re=[],Ve=(a("ea7b"),{data:function(){return{connected:!1,user:{},userslct:{firstname:"",name:"",admin:!1},isAdmin:!1,form:{firstname:"",name:"",email:""}}},created:function(){this.connected=this.$store.getters.user.loggedIn,console.log(c.a.auth().currentUser.email),this.user=c.a.auth().currentUser,this.form.email=this.user.email},methods:{createUser:function(){var e=this,t=c.a.auth().currentUser;c.a.database().ref("users/"+t.uid).set({firstname:this.form.firstname,name:this.form.name,email:t.email,admin:this.userslct.admin}).then((function(){alert("Votre profil a été mis à jour."),e.$router.replace({name:"home"})}))}},mounted:function(){var e=this,t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.user.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.userslct.firstname=r[0].firstname,e.userslct.name=r[0].name,e.userslct.admin=r[0].admin,e.form.firstname=e.userslct.firstname,e.form.name=e.userslct.name,e.isAdmin=e.userslct.admin)}))}}),Ie=Ve,ze=Object(d["a"])(Ie,je,Re,!1,null,null,null),Me=ze.exports,qe={props:{},components:{Profile:Me}},Ne=qe,Fe=Object(d["a"])(Ne,Oe,$e,!1,null,null,null),Be=Fe.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("Admin")],1)},He=[],Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[e.isConnected&&e.isAdmin?a("b-card",{staticClass:"mb-4 ",attrs:{title:"Portail administrateur"}},[a("p",[e._v("Bienvenue "+e._s(e.currentU.firstname)+"!")]),a("b-card-group",{attrs:{deck:""}},[a("b-col",[a("b-row",{staticClass:"my-1"},[a("b-card",{attrs:{title:"Articles"}},[a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"newArticle",size:"lg"}},[e._v("Ajouter un article")])],1),a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"editArticle",size:"lg"}},[e._v("Modifier ou supprimer un article")])],1)],1)],1),a("b-row",{staticClass:"my-1"},[a("b-card",{attrs:{title:"Evenements"}},[a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"#",size:"lg"}},[e._v("Ajouter un évènement")])],1),a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"#",size:"lg"}},[e._v("Modifier ou supprimer un évènement")])],1)],1)],1),a("b-row",{staticClass:"my-1"},[a("b-card",{attrs:{title:"Publicité"}},[a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"#",size:"lg"}},[e._v("Ajouter une publicité")])],1),a("b-col",{staticClass:"my-1"},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"#",size:"lg"}},[e._v("Modifier ou supprimer une publicité")])],1)],1)],1),a("b-row",{staticClass:"my-1"},[a("b-card",{attrs:{title:"Gestion Utilisateurs"}},[a("b-button",{attrs:{variant:"outline-secondary",block:"",href:"gestionAdmins",size:"lg"}},[e._v("Gérer les administrateurs")])],1)],1)],1)],1)],1):e.isConnected&&!e.isAdmin?a("b-card",{staticClass:"mb-4 ",attrs:{title:"Portail administrateur"}},[a("p",[e._v("Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")])],1):a("b-card",{staticClass:"mb-4 ",attrs:{title:"Portail administrateur"}},[a("p",[e._v("Accès refusé! Vous devez vous connecter.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")]),a("b-button",{attrs:{variant:"primary",href:"inscriptionConnexion"}},[e._v("Se connecter")])],1)],1)},We=[],Ke={data:function(){return{isConnected:!1,isAdmin:!1,user:"",currentU:{firstname:"",name:"",admin:!1}}},created:function(){this.user=c.a.auth().currentUser,null!=this.user&&(this.isConnected=!0)},mounted:function(){var e=this;e.user=c.a.auth().currentUser;var t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.user.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.currentU.firstname=r[0].firstname,e.currentU.name=r[0].name,e.currentU.admin=r[0].admin,e.isAdmin=e.currentU.admin)}))}},Xe=Ke,Qe=Object(d["a"])(Xe,Je,We,!1,null,null,null),Ye=Qe.exports,Ze={props:{},components:{Admin:Ye}},et=Ze,tt=Object(d["a"])(et,Ge,He,!1,null,null,null),at=tt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("Administrators")],1)},it=[],st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isConnected&&e.isAdmin?a("b-card",{staticClass:"mb-4 center-block",staticStyle:{"max-width":"45rem","min-width":"45rem",float:"none"},attrs:{title:"Liste des administrateurs"}},[a("b-list-group",e._l(e.admins,(function(t){return a("b-list-item",{key:t.id},[a("b-form-checkbox",{attrs:{label:"Administrateur",name:"check-button",switch:""},on:{change:function(a){return e.updateAdmin(t)}},model:{value:t.admin,callback:function(a){e.$set(t,"admin",a)},expression:"admin.admin"}}),e._v(e._s(t.firstname)+" "+e._s(t.name)+" ")],1)})),1)],1):e.isConnected&&!e.isAdmin?a("b-card",{staticClass:"mb-4 ",attrs:{title:"Liste des administrateurs"}},[a("p",[e._v("Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")])],1):a("b-card",{staticClass:"mb-4 ",attrs:{title:"Liste des administrateurs"}},[a("p",[e._v("Accès refusé! Vous devez vous connecter.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")]),a("b-button",{attrs:{variant:"primary",href:"inscriptionConnexion"}},[e._v("Se connecter")])],1)},nt=[],ot={data:function(){return{admins:[],isConnected:!1,isAdmin:!1,currentUser:"",adminState:!1}},created:function(){this.currentUser=c.a.auth().currentUser,null!=this.currentUser&&(this.isConnected=!0),this.listAllUsers()},mounted:function(){var e=this;e.user=c.a.auth().currentUser;var t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.currentUser.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.currentUser.firstname=r[0].firstname,e.currentUser.name=r[0].name,e.currentUser.admin=r[0].admin,e.isAdmin=e.currentUser.admin)}))},methods:{listAllUsers:function(){var e=this,t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(e){r.push({id:e,firstname:a[e].firstname,name:a[e].name,admin:a[e].admin,email:a[e].email})})),e.admins=r}))},updateAdmin:function(e){console.log(e.id),c.a.database().ref("users/"+e.id).set({firstname:e.firstname,name:e.name,email:e.email,admin:!e.admin}).then((function(){0==e.admin?alert("L'utilisateur "+e.firstname+" "+e.name+" a maintenant le statut Administrateur."):alert("L'utilisateur "+e.firstname+" "+e.name+" ne fait plus partie des administrateurs.")}))}}},lt=ot,ct=Object(d["a"])(lt,st,nt,!1,null,null,null),ut=ct.exports,mt={props:{},components:{Administrators:ut}},dt=mt,ft=Object(d["a"])(dt,rt,it,!1,null,null,null),pt=ft.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",{staticClass:"row my-5"},[a("h1",[e._v("On en parle !")])]),a("Searchbar"),a("b-row",{attrs:{cols:"1","cols-lg":"2","cols-md":"1","cols-sm":"1"}},e._l(e.articlesList,(function(t){return a("Article",{key:t.id,attrs:{article:t,articlesList:e.articlesList}})})),1)],1)},vt=[],ht=(a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("b-select",{staticClass:"col",attrs:{id:"Tags",name:"Tags"},model:{value:e.selectedTag,callback:function(t){e.selectedTag=t},expression:"selectedTag"}},[a("option",{attrs:{value:"",disabled:""}},[e._v("Catégorie")]),e._l(e.articleTags,(function(t){return a("option",{key:t},[e._v(e._s(t))])}))],2),a("b-input",{staticClass:"col",attrs:{type:"text",placeholder:"Rechercher un article"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("b-button",{staticClass:"col",attrs:{variant:"primary"},on:{click:e.searchArticleByText}},[e._v("Rechercher")]),a("b-button",{staticClass:"col",attrs:{variant:"info"},on:{click:function(t){return e.sortArrays(e.articlesList)}}},[e._v("Trier")]),a("b-button",{staticClass:"col",attrs:{variant:"primary"},on:{click:e.searchArticleByText}},[e._v("Go")]),a("b-button",{staticClass:"col",attrs:{variant:"info"},on:{click:e.searchArticleByText}},[e._v("Go")])],1)}),gt=[],_t=(a("a4d3"),a("e01a"),{data:function(){return{search:"",articleTags:[],selectedTag:""}},created:function(){this.displayPropTags(this.articleTags)},methods:{displayPropTags:function(e){var t=c.a.database().ref("tags");t.once("value",(function(t){t.forEach((function(t){var a=t.key;console.log(a),e.push(a)}))})),console.log(e.length)},searchArticleByText:function(){console.log(this.search),console.log(this.selectedTag);var e=c.a.database().ref("/annonces");e.once("value",(function(e){e.forEach((function(e){var t=e.key,a=e.val(),r={id:t,"propriétaire":a.propriétaire,categorie:a.categorie,marque:a.marque,titre:a.titre,prix:a.prix,description:a.description,ville:a.ville,dateDePublication:a.date,disponibility:!0,imageUrl:a.imageUrl};console.log(r)}))}))}}}),yt=_t,Ct=Object(d["a"])(yt,ht,gt,!1,null,null,null),xt=Ct.exports,wt={components:{Article:z,Searchbar:xt},data:function(){return{articlesList:[],search:"",articleTags:[],selectedTag:"",itemOrderBy:"id"}},created:function(){this.articlesList=this.display(),console.log("le pb est ici!"),console.log("1: "+this.articlesList.length),this.displayPropTags(this.articleTags)},mounted:function(){},computed:{},methods:{displayPropTags:function(e){var t=c.a.database().ref("tags");t.once("value",(function(t){t.forEach((function(t){var a=t.key;console.log(a),e.push(a)}))})),console.log(e.length)},searchArticleByText:function(){console.log(this.search),console.log(this.selectedTag)},display:function(){var e=[],t=c.a.database().ref("articles");return t.once("value",(function(t){t.forEach((function(t){var a=t.key,r=t.val(),i={id:a,title:r.title,abstract:r.abstract,releaseDate:r.releaseDate,picture:r.picture};console.log(i),e.push(i)}))})),console.log(e.length),e}}},St=wt,kt=Object(d["a"])(St,bt,vt,!1,null,null,null),Et=kt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[e.articleSelected[0].media&&0==e.articleSelected[0].is3DReal?a("div",{staticClass:"mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{src:e.articleSelected[0].video,frameborder:"0"}})]):e._e(),e.articleSelected[0].media&&e.articleSelected[0].is3DReal?a("div",[a("div",{staticClass:"sketchfab-embed-wrapper mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{title:"A 3D model",src:e.articleSelected[0].media,frameborder:"0",allow:"autoplay; fullscreen; vr",mozallowfullscreen:"true",webkitallowfullscreen:"true"}})])]):a("div",[a("img",{staticClass:"col-12",attrs:{src:e.articleSelected[0].picture}})]),a("h1",{staticClass:"my-3"},[e._v(e._s(e.articleSelected[0].title))]),a("h3",{staticClass:"my-1"},[e._v(e._s(e.articleSelected[0].subtitle))]),a("div",{staticClass:"row my-1"},[a("div",{staticClass:"col"},[e._v("Mis en ligne le: "+e._s(e.articleSelected[0].releaseDate))]),a("div",{staticClass:"col"},[e._v("Ecrit part: "+e._s(e.articleSelected[0].autor))]),a("div",{staticClass:"col"},[e._v("Catégories: "),e._l(e.articleSelected[0].tags,(function(t,r){return a("div",{key:r,staticClass:"raw"},[e._v(e._s(t))])}))],2)]),a("div",{staticClass:"my-4",domProps:{innerHTML:e._s(e.articleSelected[0].content)}})])],1)},Dt=[],Tt=(a("1276"),{props:["id"],data:function(){return{articlesId:"",articleSelected:[]}},created:function(){this.articlesId=this.getIDfromURL(),console.log(this),console.log(this.articlesId),this.display(this.articlesId,this.articleSelected)},mounted:function(){},methods:{display:function(e,t){var a=c.a.database().ref("articles");a.once("value",(function(a){a.forEach((function(a){var r=a.key,i=a.val();console.log(i);var s={id:r,title:i.title,subtitle:i.subtitle,abstract:i.abstract,content:i.content,releaseDate:i.releaseDate,autor:i.autor,tags:i.tags,picture:i.picture,media:i.media,is3DReal:i.is3DReal};r==e&&(console.log(r),t.push(s),console.log("1 "+t.length))}))}))},getIDfromURL:function(){return window.location.pathname.split("article")[1]}}}),Ut=Tt,Pt=Object(d["a"])(Ut,At,Dt,!1,null,null,null),Lt=Pt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("div",{staticClass:"row my-5"},[a("h1",[e._v("Articles:")])]),e.isConnected&&e.isAdmin?a("div",e._l(e.articlesList,(function(t){return a("Edit",{key:t.id,attrs:{article:t,articlesList:e.articlesList}})})),1):e.isConnected&&!e.isAdmin?a("b-card",{staticClass:"mb-4 "},[a("p",[e._v("Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")])],1):a("b-card",{staticClass:"mb-4 "},[a("p",[e._v("Accès refusé! Vous devez vous connecter.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")]),a("b-button",{attrs:{variant:"primary",href:"inscriptionConnexion"}},[e._v("Se connecter")])],1)],1)},$t=[],jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col justify-content-center my-3"},[a("b-card",{staticClass:"row"},[a("h1",{staticClass:"col"},[e._v(e._s(e.article.title))]),a("p",{staticClass:"col"},[e._v("Article du :"+e._s(e.article.releaseDate))]),a("div",{staticClass:"row"},[a("router-link",{staticClass:"btn btn-primary mx-3",attrs:{to:{name:"modifyingArticle",params:{id:e.article.id,list:e.articlesList}}}},[e._v("Modifier")]),a("b-input",{staticClass:"ml-3 col-5",attrs:{placeholder:"Entrer le nom de l'article et cliquer sur supprimer"},model:{value:e.checkName,callback:function(t){e.checkName=t},expression:"checkName"}}),a("b-button",{attrs:{type:"submit",variant:"danger"},on:{click:function(t){return e.deleteArticle(e.article)}}},[e._v("Supprimer")])],1)])],1)},Rt=[],Vt={props:{article:Object,articlesList:Array},data:function(){return{showContact:!1,imageUrl:"",checkName:""}},methods:{send:function(){this.showContact=!0},deleteArticle:function(e){if(console.log(this.checkName),console.log(e),e.title==this.checkName){var t=c.a.database().ref("articles/"+e.id);t.remove()}else alert("Entrez correctement le nom de l'article")}}},It=Vt,zt=Object(d["a"])(It,jt,Rt,!1,null,"3f86c0e6",null),Mt=zt.exports,qt={components:{Edit:Mt},data:function(){return{articlesList:[],isConnected:!1,isAdmin:!1,user:"",currentU:{firstname:"",name:"",admin:!1}}},created:function(){this.articlesList=this.display(),console.log("le pb est ici!"),console.log("1: "+this.articlesList.length),this.user=c.a.auth().currentUser,null!=this.user&&(this.isConnected=!0)},mounted:function(){var e=this;e.user=c.a.auth().currentUser;var t=c.a.database().ref("users");t.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.user.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.currentU.firstname=r[0].firstname,e.currentU.name=r[0].name,e.currentU.admin=r[0].admin,e.isAdmin=e.currentU.admin)}))},methods:{display:function(){var e=[],t=c.a.database().ref("articles");return t.once("value",(function(t){t.forEach((function(t){var a=t.key,r=t.val(),i={id:a,title:r.title,releaseDate:r.releaseDate};console.log(i),e.push(i)}))})),console.log(e.length),e}}},Nt=qt,Ft=Object(d["a"])(Nt,Ot,$t,!1,null,"6c7e2546",null),Bt=Ft.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("Modif")],1)},Ht=[],Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Modification de l'article:")]),e.isConnected&&e.isAdmin?a("div",[e.show?a("b-form",{on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},submit:e.onSubmit}},[a("b-form-group",{attrs:{label:"Titre:"}},[a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Titre"},model:{value:e.articleSelected[0].title,callback:function(t){e.$set(e.articleSelected[0],"title",t)},expression:"articleSelected[0].title"}})],1),a("b-form-group",{attrs:{label:"Sous-titre:",description:"Facultatif"}},[a("b-form-input",{attrs:{placeholder:"Sous-titre"},model:{value:e.articleSelected[0].subtitle,callback:function(t){e.$set(e.articleSelected[0],"subtitle",t)},expression:"articleSelected[0].subtitle"}})],1),a("b-form-group",{attrs:{label:"Résumé:"}},[a("b-form-textarea",{attrs:{placeholder:"Résumé",rows:"3","max-rows":"6"},model:{value:e.articleSelected[0].abstract,callback:function(t){e.$set(e.articleSelected[0],"abstract",t)},expression:"articleSelected[0].abstract"}})],1),a("b-form-group",{attrs:{label:"Contenu de l'article:"}},[a("b-form",[a("vue-editor",{staticStyle:{"background-color":"white"},attrs:{label:"Contenu de l'article:",required:""},model:{value:e.articleSelected[0].content,callback:function(t){e.$set(e.articleSelected[0],"content",t)},expression:"articleSelected[0].content"}})],1)],1),a("b-form-group",{attrs:{label:"Date de mise en ligne:"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{required:""},model:{value:e.articleSelected[0].releaseDate,callback:function(t){e.$set(e.articleSelected[0],"releaseDate",t)},expression:"articleSelected[0].releaseDate"}})],1),a("b-form-group",{attrs:{label:"Catégorie:"}},[a("b-form-input",{attrs:{placeholder:"Ajouter une catégorie en appuyant sur Entrée",list:"input-list"},on:{keyup:e.handleTyping},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}}),a("b-form-datalist",{attrs:{id:"input-list",options:e.propTags}}),a("div",{staticClass:"tags mt-2"},e._l(e.articleTags,(function(t,r){return a("div",{key:r,staticClass:"tag",on:{click:function(t){return e.removeTag(r)}}},[e._v(e._s(t))])})),0)],1),a("b-form-group",{attrs:{label:"Auteur de l'article:"}},[a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Auteur"},model:{value:e.articleSelected[0].autor,callback:function(t){e.$set(e.articleSelected[0],"autor",t)},expression:"articleSelected[0].autor"}})],1),a("b-form-group",{attrs:{label:"Photo de présentation:"}},[a("b-form",{model:{value:e.articleSelected[0].picture,callback:function(t){e.$set(e.articleSelected[0],"picture",t)},expression:"articleSelected[0].picture"}},[a("div",[a("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}})]),a("div",[a("p",[e._v(" Progression: "+e._s(e.uploadValue.toFixed()+"%")+" "),a("progress",{attrs:{id:"progress",max:"100"},domProps:{value:e.uploadValue}})])]),null!=e.imageData?a("div",[a("img",{staticClass:"preview",attrs:{required:"",src:e.articleSelected[0].picture}}),a("br"),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.onUpload(t)}}},[e._v("Importer l'image")])],1):e._e()])],1),a("b-form-group",{attrs:{label:"Média de présentation:",description:"facultatif"}},[a("b-form-input",{attrs:{type:"text",placeholder:"Lien vers un média"},model:{value:e.articleSelected[0].media,callback:function(t){e.$set(e.articleSelected[0],"media",t)},expression:"articleSelected[0].media"}}),a("b-checkbox",{model:{value:e.articleSelected[0].is3DReal,callback:function(t){e.$set(e.articleSelected[0],"is3DReal",t)},expression:"articleSelected[0].is3DReal"}},[e._v("Cocher si c'est une réalisation 3D SketchFab")])],1),a("div",{staticClass:"mt-5"},[a("h1",[e._v("Prévisualisation de l'article:")]),a("div",[a("h2",[e._v("Vignette:")]),a("b-card",{staticClass:"mb-4",staticStyle:{"max-width":"50rem"},attrs:{title:e.articleSelected[0].title,"img-src":e.articleSelected[0].picture,"img-alt":"Image","img-top":"","img-width":"max-whidth: 50rem","img-height":"max-height: 50rem",tag:"article"}},[a("b-card-text",[e._v(e._s(e.articleSelected[0].abstract))]),a("b-button",{attrs:{href:"#",variant:"primary"}},[e._v("Lire la suite")])],1)],1),a("div",[a("h2",[e._v("Page Complète:")]),a("b-card",[e.articleSelected[0].media&&0==e.articleSelected[0].is3DReal?a("div",{staticClass:"mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{src:e.articleSelected[0].media,frameborder:"0"}})]):e._e(),e.articleSelected[0].media&&e.articleSelected[0].is3DReal?a("div",[a("div",{staticClass:"sketchfab-embed-wrapper mb-4 embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"col-12 embed-responsive-item",attrs:{title:"A 3D model",src:e.articleSelected[0].media,frameborder:"0",allow:"autoplay; fullscreen; vr",mozallowfullscreen:"true",webkitallowfullscreen:"true"}})])]):a("div",[a("img",{staticClass:"col-12",attrs:{src:e.articleSelected[0].picture}})]),a("div",[a("h1",[e._v(e._s(e.articleSelected[0].title))]),a("h3",[e._v(e._s(e.articleSelected[0].subtitle))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v("Mis en ligne le: "+e._s(e.articleSelected[0].releaseDate))]),a("div",{staticClass:"col"},[e._v("Ecrit part: "+e._s(e.articleSelected[0].autor))]),a("div",{staticClass:"col"},[e._v(" Catégories: "),e._l(e.articleTags,(function(t,r){return a("div",{key:r,staticClass:"raw"},[e._v(e._s(t))])}))],2)]),a("div",{domProps:{innerHTML:e._s(e.articleSelected[0].content)}})])])],1)]),a("b-button",{staticClass:"mx-3 my-3",attrs:{type:"submit",variant:"primary"}},[e._v("Enregistrer la modification")])],1):e._e()],1):e.isConnected&&!e.isAdmin?a("b-card",{staticClass:"mb-4 "},[a("p",[e._v("Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")])],1):a("b-card",{staticClass:"mb-4 "},[a("p",[e._v("Accès refusé! Vous devez vous connecter.")]),a("b-button",{attrs:{variant:"primary",href:"/"}},[e._v("Retour à l'acceuil")]),a("b-button",{staticClass:"mx-3",attrs:{variant:"primary",href:"inscriptionConnexion"}},[e._v("Se connecter")])],1)],1)},Wt=[],Kt={components:{VueEditor:Se["a"]},data:function(){return{imageData:null,picture:null,uploadValue:0,articlesId:"",articleSelected:[],tag:"",propTags:[],show:!0,articleTags:[],isConnected:!1,isAdmin:!1,user:"",currentU:{firstname:"",name:"",admin:!1}}},created:function(){this.user=c.a.auth().currentUser,null!=this.user&&(this.isConnected=!0),this.articlesId=this.getIDfromURL(),this.displayPropTags(this.propTags)},mounted:function(){var e=this,t=this.getIDfromURL();c.a.database().ref("articles").on("value",(function(a){var r=[];a.forEach((function(a){a.key==t&&(r.push(a.val()),e.articleSelected=r,e.articleTags=e.articleSelected[0].tags)}))})),e.user=c.a.auth().currentUser;var a=c.a.database().ref("users");a.on("value",(function(t){var a=t.val(),r=[];Object.keys(a).forEach((function(t){t==e.user.uid&&r.push({firstname:a[t].firstname,name:a[t].name,admin:a[t].admin})})),r.length>0&&(e.currentU.firstname=r[0].firstname,e.currentU.name=r[0].name,e.currentU.admin=r[0].admin,e.isAdmin=e.currentU.admin)}))},methods:{displayPropTags:function(e){var t=c.a.database().ref("tags");t.once("value",(function(t){t.forEach((function(t){var a=t.key;e.push(a)}))}))},getIDfromURL:function(){return window.location.pathname.split("modifyingArticle")[1]},previewImage:function(e){this.uploadValue=0,this.picture=null,this.imageData=e.target.files[0]},onSubmit:function(e){if(e.preventDefault(),0==this.articleSelected[0].abstract.length||this.articleSelected[0].abstract.length>280)alert("Vous devez écrire un résumé de 280 caractères maximum.");else if(0==this.articleSelected[0].content.length)alert("Vous devez écrire un article.");else if(0==this.articleSelected[0].releaseDate.length)alert("Vous devez entrer une date.");else if(0==this.articleSelected[0].picture.length)alert("Vous devez entrer une image.");else if(0==this.articleSelected[0].tags.length)alert("Vous devez entrer au moins une catégorie.");else{for(var t=0;t<this.articleTags.length;t++)c.a.database().ref("tags/"+this.articleTags[t]).set({tag:this.articleTags[t]});console.log(this.articleSelected[0].content.length),c.a.database().ref("articles/"+this.articlesId).set({title:this.articleSelected[0].title,subtitle:this.articleSelected[0].subtitle,abstract:this.articleSelected[0].abstract,content:this.articleSelected[0].content,releaseDate:this.articleSelected[0].releaseDate,autor:this.articleSelected[0].autor,tags:this.articleTags,picture:this.articleSelected[0].picture,media:this.articleSelected[0].media,is3DReal:this.articleSelected[0].is3DReal}).then(alert("Votre article a été modifier avec succès."))}},onUpload:function(){var e=this;this.picture=null;var t=c.a.storage().ref("".concat(this.imageData.name)).put(this.imageData);t.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(e){console.log(e.message)}),(function(){e.uploadValue=100,t.snapshot.ref.getDownloadURL().then((function(t){e.articleSelected[0].picture=t}))}))},addTag:function(e){if(""!=e&&this.articleTags.length<3){var t=e.toLowerCase();this.articleTags.push(t)}},removeTag:function(e){this.articleTags.splice(e,1)},tagExists:function(e){return-1!==this.articleTags.indexOf(e)},handleTyping:function(e){if(13===e.keyCode){var t=this.tag.replace(/,/g,"");this.tagExists(t)||(this.addTag(t),this.tag="")}}}},Xt=Kt,Qt=(a("08cc"),Object(d["a"])(Xt,Jt,Wt,!1,null,"4ae2b1a6",null)),Yt=Qt.exports,Zt={components:{Modif:Yt}},ea=Zt,ta=Object(d["a"])(ea,Gt,Ht,!1,null,"52e87076",null),aa=ta.exports;r["default"].use(k["a"]);var ra=[{path:"/",name:"home",component:K},{path:"/inscriptionConnexion",name:"inscriptionConnexion",component:fe},{path:"/profil",name:"profile",component:Be},{path:"/admin",name:"admin",component:at},{path:"/gestionAdmins",name:"adminsManage",component:pt},{path:"/articles",name:"articlesList",component:Et},{path:"/404",name:"404",component:_e},{path:"/article:id",name:"completeArticle",component:Lt,props:!0},{path:"*",redirect:{name:"404"}},{path:"/newArticle",name:"newArticle",component:Le},{path:"/editArticle",name:"editArticle",component:Bt},{path:"/modifyingArticle:id",name:"modifyingArticle",component:aa,props:!0}],ia=new k["a"]({mode:"history",base:"/",routes:ra});ia.beforeEach((function(e,t,a){var r=e.matched.some((function(e){return e.meta.requiresAuth})),i=c.a.auth().currentUser;console.log("isauthenticated",i),r&&!i?a("/login"):a()}));var sa=ia,na=a("5f5b"),oa=a("2f62");r["default"].use(oa["a"]);var la=new oa["a"].Store({state:{user:{loggedIn:!1,data:null},articles:[],events:[],selectedArticle:{},selectedEvent:{}},getters:{user:function(e){return e.user},loggedIn:function(e){return e.user},articles:function(e){return e.articles},selectedArticle:function(e){return e.selectedArticle},events:function(e){return e.events},selectedEvent:function(e){return e.selectedEvent}},mutations:{SET_LOGGED_IN:function(e,t){e.user.loggedIn=t},SET_USER:function(e,t){e.user.data=t},SET_ARTICLES:function(e,t){e.articles.push(t)},SET_SELECTEDARTICLE:function(e,t){e.selectedArticle=t},SET_EVENTS:function(e,t){e.events.push(t)},SET_SELECTEDEVENT:function(e,t){e.selectedEvent=t}},actions:{fetchUser:function(e,t){var a=e.commit;a("SET_LOGGED_IN",null!==t),a("SET_USER",t?{id:t.uid,email:t.email}:null)},displayArticles:function(e){var t=e.commit,a=c.a.database().ref("articles").orderByChild("releaseDate");a.once("value",(function(e){e.forEach((function(e){var a=e.key,r=e.val(),i={id:a,title:r.title,subtitle:r.subtitle,abstract:r.abstract,content:r.content,releaseDate:r.releaseDate,autor:r.autor,category:r.category,picture:r.picture};t("SET_ARTICLES",i)}))}))}}}),ca=(a("2dd8"),a("bc3a")),ua=a.n(ca);r["default"].use(na["a"]),r["default"].config.productionTip=!1,r["default"].prototype.$axios=ua.a;var ma,da={apiKey:"AIzaSyCccFIiCeayuKmI-p1JJE005FNmMCxCaCU",authDomain:"hotel-de-briere.firebaseapp.com",databaseURL:"https://hotel-de-briere.firebaseio.com",projectId:"hotel-de-briere",storageBucket:"hotel-de-briere.appspot.com",messagingSenderId:"1033408620032",appId:"1:1033408620032:web:0b848445eb219bdbad5ae5",measurementId:"G-WCREGXL300"};c.a.initializeApp(da),c.a.auth().onAuthStateChanged((function(e){console.log("user",e),ma||(ma=new r["default"]({router:sa,store:la,render:function(e){return e(S)}}).$mount("#app"))}))},"5c0b":function(e,t,a){"use strict";var r=a("9c0c"),i=a.n(r);i.a},"653a":function(e,t,a){"use strict";var r=a("d5da"),i=a.n(r);i.a},6860:function(e,t,a){},"760c":function(e,t,a){"use strict";var r=a("c3f5"),i=a.n(r);i.a},"8baf":function(e,t,a){"use strict";var r=a("6860"),i=a.n(r);i.a},"9c0c":function(e,t,a){},a6c9:function(e,t,a){"use strict";var r=a("3d9f"),i=a.n(r);i.a},ba96:function(e,t,a){},c3f5:function(e,t,a){},d5da:function(e,t,a){}});
//# sourceMappingURL=app.722bc6ec.js.map